(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-339a244a"],{"45bc":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const c={key:0,class:"text"},r=Object(a["createElementVNode"])("p",null,"Вы уже авторизованы на сайте",-1),l=Object(a["createElementVNode"])("p",null,"Можете продолжить гулять по сайту с помощью главного меню",-1),n=[r,l],i={class:"text"},s=Object(a["createElementVNode"])("br",null,null,-1),d=["id"],u={class:"form__table"},m=Object(a["createElementVNode"])("td",{class:"form__table-cell"},null,-1),b={class:"form__table-cell form__table-cell--wide"},p=["disabled"],O={key:0},j=Object(a["createElementVNode"])("br",null,null,-1),f={class:"control-description is-error"},N={class:"nowrap"};function E(e,t,o,r,l,E){const w=Object(a["resolveComponent"])("router-link"),V=Object(a["resolveComponent"])("news-input-row");return e.isAuth?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",c,n)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])(" Если у вас еще нет учетной записи, вы можете "),Object(a["createVNode"])(w,{to:"singup"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("зарегистрироваться")]),_:1}),Object(a["createTextVNode"])(". ")]),s]),Object(a["createElementVNode"])("form",{action:"#",id:e.formId,class:"form",novalidate:"",onSubmit:t[2]||(t[2]=Object(a["withModifiers"])((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[Object(a["createElementVNode"])("table",u,[Object(a["createElementVNode"])("tbody",null,[Object(a["createVNode"])(V,{formName:e.formId,inputType:"email",inputName:"email",label:"Email *",description:"Поле обязательно к заполнению",controlValue:e.form.email,"onUpdate:controlValue":t[0]||(t[0]=t=>e.form.email=t),errors:e.v$.email.$errors},null,8,["formName","controlValue","errors"]),Object(a["createVNode"])(V,{formName:e.formId,inputType:"password",inputName:"password",label:"Пароль *",description:"Поле обязательно к заполнению",controlValue:e.form.password,"onUpdate:controlValue":t[1]||(t[1]=t=>e.form.password=t),errors:e.v$.password.$errors},null,8,["formName","controlValue","errors"]),Object(a["createElementVNode"])("tr",null,[m,Object(a["createElementVNode"])("td",b,[Object(a["createElementVNode"])("button",{type:"submit",disabled:e.isFormLoading||e.isAttemptsExeed||e.isSubmitBlocked,class:Object(a["normalizeClass"])(["button",{"is-loading":e.isFormLoading}])},"Отправить",10,p),e.isSubmitBlocked?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,[j,Object(a["createElementVNode"])("small",f,[Object(a["createTextVNode"])(" Превышено максимальное количество попыток авторизоваться. Возможность авторизоваться заблокирована до "),Object(a["createElementVNode"])("span",N,Object(a["toDisplayString"])(e.dateTimeFilter(e.blockedUntilDate)),1)])])):Object(a["createCommentVNode"])("",!0)])])])])],40,d)],64))}o("14d9");var w=o("5502"),V=o("6605"),v=o("dbae"),h=o("c3b3"),k=o("b9fb"),g=o("8edc"),A=o("8512"),_=o("7cfa"),T=Object(a["defineComponent"])({name:"Auth",setup(){const e=Object(w["e"])(),t=Object(V["d"])(),o=Object(a["ref"])("auth"),c=Object(a["reactive"])({email:"",password:""}),r={email:{required:k["c"],email:k["a"]},password:{required:k["c"],minLength:Object(k["b"])(6)}},l=Object(h["a"])(r,c),n=e.getters["auth/isAuth"],{isDisabled:i,isFormLoading:s,isSubmitBlocked:d,isAttemptsExeed:u,blockedUntilDate:m,attemptCount:b}={...Object(v["a"])("singIn")};async function p(){if(l.value.$touch(),!l.value.$error)try{s.value=!0;let{result:o,data:a}=await e.dispatch("auth/login",c);o?(await e.dispatch("profile/fetchProfile"),await t.push("/profile")):(await e.dispatch("alerts/alertAdd",{id:Date.now(),text:Object(_["a"])(a.error.message),type:"error",closable:!0,autoClosable:!1}),b.value++)}catch(o){}finally{s.value=!1}}return{formId:o,form:c,v$:l,isAuth:n,isDisabled:i,isFormLoading:s,isSubmitBlocked:d,isAttemptsExeed:u,blockedUntilDate:m,onSubmit:p,dateTimeFilter:A["a"]}},components:{NewsInputRow:g["a"]}}),D=o("6b0d"),S=o.n(D);const I=S()(T,[["render",E]]);t["default"]=I},"7cfa":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));const a={EMAIL_NOT_FOUND:"Пользователь с таким email не был найден",INVALID_PASSWORD:"Пароль неверный",TOO_MANY_ATTEMPTS_TRY_LATER:"Превышено максимальное количество попыток зарегистрироваться.",USER_DISABLED:"Учетная запись пользователя отключена администратором",EMAIL_EXISTS:"Пользователь с таким адресом электронной почты уже зарегистрирован",SING_UP_OPERATION_NOT_ALLOWED:"Для этого сайта недоступна регистрация с помощью лектронной почты и пароля",auth:"Пожалуйста войдите в систему"};var c=a;function r(e){return c[e]?c[e]:"Неизвестная ошибка"}},8512:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));const a={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};function c(e){return Intl.DateTimeFormat("ru-Ru",a).format(e)}},dbae:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var a=o("7a23"),c=o("5502");const r=5e4,l=3;function n(e){const t=Object(c["e"])(),o=Object(a["ref"])(0),n=Object(a["ref"])(!1),i="skipAuto/"+e,s=Object(a["computed"])(()=>t.getters[i]),d=Object(a["computed"])(()=>new Date(s.value)),u=Object(a["computed"])(()=>o.value>=l),m=Object(a["computed"])(()=>!!d.value&&d.value.getTime()>Date.now()),b=Object(a["computed"])(()=>{n.value||m.value});return Object(a["watch"])(u,a=>{let c=new Date,l={};a&&(c.setMilliseconds(c.getMilliseconds()+r),l[e]=c,t.dispatch("skipAuto/setParam",l),setTimeout(()=>{o.value=0,t.dispatch("skipAuto/setParam",{singUp:null})},r))}),{isDisabled:b,isFormLoading:n,isSubmitBlocked:m,isAttemptsExeed:u,attemptCount:o,blockedUntilDate:d}}}}]);
//# sourceMappingURL=chunk-339a244a.c3707348.js.map