(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d835088"],{5915:function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a=["id"],l={class:"form__table"},r=Object(o["createElementVNode"])("td",{class:"form__table-cell"}," ЧПУ ",-1),n={class:"form__table-cell form__table-cell--wide"},s={class:"row",style:{"padding-bottom":"10px"}},i={class:"col"},d={class:""},b={class:"col-auto"},u={key:0,class:"check is-seccess"},m={key:1,class:"check is-error"},j=Object(o["createElementVNode"])("td",{class:"form__table-cell"},null,-1),O={class:"form__table-cell form__table-cell--wide"},p={class:"row"},f={class:"col-auto"},v=["disabled"],N={key:0,class:"col-auto"},g={key:1,class:"col-auto"};function w(e,t,c,w,V,h){const k=Object(o["resolveComponent"])("news-input-row"),E=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createElementBlock"])("form",{action:"#",id:e.formName,class:"form",onSubmit:t[2]||(t[2]=Object(o["withModifiers"])((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[Object(o["createElementVNode"])("table",l,[Object(o["createElementVNode"])("tbody",null,[Object(o["createVNode"])(k,{formName:e.formName,inputName:"catalog-img",label:"Ссылку на картинку *",description:"Поле обязательно к заполнению.\r\n          Картинка в формате jpg, png, svg, webp. Размер картинки не более 800*800px.\r\n          <br> Вес картинки не более 2Мб",controlValue:e.section.img,"onUpdate:controlValue":t[0]||(t[0]=t=>e.section.img=t),errors:e.v$.img.$errors},null,8,["formName","controlValue","errors"]),Object(o["createVNode"])(k,{formName:e.formName,inputName:"catalog-title",label:"Заголовок раздела *",description:"Поле обязательно к заполнению",controlValue:e.section.title,"onUpdate:controlValue":t[1]||(t[1]=t=>e.section.title=t),errors:e.v$.title.$errors},null,8,["formName","controlValue","errors"]),Object(o["createElementVNode"])("tr",null,[r,Object(o["createElementVNode"])("td",n,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("small",d,Object(o["toDisplayString"])(e.hru),1)]),Object(o["createElementVNode"])("div",b,[e.isHruValid?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",u,"✔")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",m,"✘"))])])])]),Object(o["createElementVNode"])("tr",null,[j,Object(o["createElementVNode"])("td",O,[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("button",{type:"submit",disabled:e.isFormLoading,class:Object(o["normalizeClass"])(["button",{"is-loading":e.isFormLoading}])},"Отправить",10,v)]),e.needShowButtons?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,[Object(o["createVNode"])(E,{to:"/catalog/",class:"button"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("Посмотреть каталог")]),_:1})])):Object(o["createCommentVNode"])("",!0),e.needShowButtons?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["createVNode"])(E,{to:"/catalog/edit/"+e.reserveHru,class:"button"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("Редактировать раздел каталога")]),_:1},8,["to"])])):Object(o["createCommentVNode"])("",!0)])])])])])],40,a)}var V=c("8edc"),h=c("5502"),k=c("c3b3"),E=c("b9fb"),C=c("8aa3"),y=Object(o["defineComponent"])({name:"CatalogSectionAdd",setup(){const e=Object(h["e"])(),t="catalog-types",c=Object(o["ref"])(!1),a={img:"",title:""},l={img:{required:E["c"]},title:{required:E["c"]}},r=Object(o["reactive"])({...a}),n=Object(k["a"])(l,r),s=Object(o["computed"])(()=>Object(C["a"])(r.title));let i=Object(o["ref"])("");const d=Object(o["ref"])(!1),b=Object(o["computed"])(()=>!!d.value&&!(r.img||r.title)),u=Object(o["ref"])(!1);Object(o["watch"])(s,async t=>{u.value=!!t&&await e.dispatch("catalog/isUniqueCatalogSection",t)});const m=()=>{Object.keys(r).map(e=>r[e]=a[e]),n.value.$reset()},j=async()=>{if(n.value.$touch(),n.value.$error||!u.value)return;c.value=!0;const t=await e.dispatch("catalog/createCatalogSection",{...r,hru:s.value});t.result?(d.value=!0,i.value=s.value,m(),await e.dispatch("alerts/alertAdd",{id:Date.now(),text:"Новый раздел каталога успешно создан",type:"success",closable:!0,autoClosable:!1}),await e.dispatch("catalog/fetchCatalogSections")):await e.dispatch("alerts/alertAdd",{id:Date.now(),text:"Ошибка сервера при создании нового раздела каталога",type:"error",closable:!0,autoClosable:!1}),c.value=!1};return{isFormLoading:c,formName:t,section:r,hru:s,v$:n,isAlreadyCreated:d,needShowButtons:b,onSubmit:j,isHruValid:u,reserveHru:i}},components:{NewsInputRow:V["a"]}}),_=c("6b0d"),B=c.n(_);const S=B()(y,[["render",w]]);t["default"]=S},"8aa3":function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));c("14d9");function o(e){var t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"j","з":"z","и":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"shch","ы":"y","э":"e","ю":"u","я":"ya"," ":"-"},c=[];e=e.trim().replace(/[ъь]+/g,"").replace(/й/g,"i");for(var o=0;o<e.length;++o)c.push(t[e[o]]||void 0==t[e[o].toLowerCase()]&&e[o]||t[e[o].toLowerCase()].toUpperCase());return c.join("")}}}]);
//# sourceMappingURL=chunk-1d835088.2f1365a7.js.map