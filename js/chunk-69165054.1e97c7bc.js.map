{"version":3,"sources":["webpack:///./src/views/article/ArticleAdd.vue","webpack:///./src/views/article/ArticleAdd.vue?695a","webpack:///./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/TinyMCE.js","webpack:///./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/Utils.js","webpack:///./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/ScriptLoader.js","webpack:///./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/components/EditorPropTypes.js","webpack:///./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/components/Editor.js","webpack:///./node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/index.js"],"names":["class","_createElementVNode","for","value","_hoisted_6","_hoisted_7","id","_hoisted_10","_hoisted_11","_createElementBlock","action","onSubmit","_cache","_withModifiers","args","$setup","_hoisted_1","tableName","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","name","article","type","$event","aria-describedby","_hoisted_9","_hoisted_12","_createVNode","_component_news_input_row","formName","inputName","label","description","controlValue","img","errors","title","v$","$errors","_hoisted_13","_hoisted_14","_component_editor","preview","api-key","tinymceKey","length","_hoisted_15","_Fragment","_renderList","error","_toDisplayString","$message","_hoisted_16","_hoisted_17","_hoisted_18","text","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","disabled","isLoading","_normalizeClass","_hoisted_26","needShowButtons","_hoisted_27","_component_router_link","to","fbId","_hoisted_28","setup","store","useStore","route","useRoute","meta","articleDefault","date","articleRules","required","reactive","ref","isAlreadyCreated","process","useVuelidate","computed","resetForm","Object","keys","map","key","$reset","async","$touch","$error","Date","res","dispatch","result","data","now","closable","autoClosable","components","Editor","NewsInputRow","__exports__","render","getGlobal","window","global","getTinymce","tinymce","validEvents","isValidKey","event","toLowerCase","indexOf","bindHandlers","initEvent","listeners","editor","filter","forEach","handler","on","substring","e","bindModelHandlers","props","ctx","modelValue","modelEvents","normalizedEvents","Array","isArray","join","val","prevVal","getContent","format","outputFormat","setContent","emit","initEditor","content","attrs","unique","uuid","prefix","time","random","Math","floor","String","isTextarea","element","tagName","normalizePluginArray","plugins","split","mergePlugins","initPlugins","inputPlugins","concat","isNullOrUndefined","undefined","createState","scriptId","scriptLoaded","CreateScriptLoader","state","injectScriptTag","doc","url","callback","scriptTag","createElement","referrerPolicy","src","removeEventListener","addEventListener","head","appendChild","load","push","getElementById","fn","reinitialize","ScriptLoader","editorProps","apiKey","cloudChannel","init","initialValue","inline","Boolean","toolbar","tinymceScriptSrc","validator","prop","__assign","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","this","renderInline","ce","elementRef","renderIframe","visibility","conf","_a","vueEditor","elementId","inlineEditor","modelBind","mounting","cache","isMounting","initWrapper","finalInit","readonly","selector","style","disable","mode","set","setMode","_","remove","ownerDocument","channel","scriptSrc","rerender","expose"],"mappings":"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","file":"js/chunk-69165054.1e97c7bc.js","sourcesContent":["<template>\r\n  <form action=\"#\" id=\"news\" class=\"form\" @submit.prevent=\"onSubmit\">\r\n    <table class=\"form__table\">\r\n      <tbody>\r\n      <tr v-if=\"tableName === 'specials_and_actions'\">\r\n        <td class=\"form__table-cell form__table-cell--pr15px\">\r\n          <label class=\"nowrap\" for=\"news-type\">Это акция или <br>спецпредложение *</label>\r\n        </td>\r\n        <td class=\"form__table-cell form__table-cell--wide\">\r\n          <div class=\"select\">\r\n            <select\r\n              name=\"news-type\"\r\n              id=\"news-type\"\r\n              class=\"select__select\"\r\n              v-model=\"article.type\"\r\n              aria-describedby=\"news-type-disc\">\r\n              <option value=\"action\">Акция</option>\r\n              <option value=\"special\">Спецпредложение</option>\r\n            </select>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      <tr v-if=\"tableName === 'specials_and_actions'\">\r\n        <td class=\"form__table-cell\"></td>\r\n        <td class=\"form__table-cell form__table-cell--wide form__table-cell--pb10px\">\r\n          <small class=\"control-description\" id=\"news-type-disc\">Поле обязательно к заполнению</small>\r\n        </td>\r\n      </tr>\r\n      <news-input-row\r\n        formName=\"news\"\r\n        inputName=\"news-img\"\r\n        label=\"Ссылку на картинку\"\r\n        description=\"Поле НЕобязательно к заполнению.\r\n          Картинка в формате jpg, png, svg, webp. Размер картинки не более 800*800px.\r\n          <br> Вес картинки не более 2Мб\"\r\n        v-model:controlValue=\"article.img\"\r\n        :errors=\"[]\"\r\n      >\r\n      </news-input-row>\r\n      <news-input-row\r\n        formName=\"news\"\r\n        inputName=\"news-title\"\r\n        label=\"Заголовок новости *\"\r\n        description=\"Поле обязательно к заполнению\"\r\n        v-model:controlValue=\"article.title\"\r\n        :errors=\"v$.title.$errors\"\r\n      >\r\n      </news-input-row>\r\n      <tr>\r\n        <td class=\"form__table-cell form__table-cell--pr15px\">\r\n          <label class=\"nowrap\" for=\"news-preview\">Превью новости *</label>\r\n        </td>\r\n        <td class=\"form__table-cell form__table-cell--wide\">\r\n          <editor v-model=\"article.preview\" :api-key=\"tinymceKey\"></editor>\r\n          <div class=\"control-error\" v-if=\"v$.preview.$errors.length\">\r\n            <div v-for=\"error of v$.preview.$errors\">\r\n              <div>{{ error.$message }}</div>\r\n            </div>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"form__table-cell\"></td>\r\n        <td class=\"form__table-cell form__table-cell--wide form__table-cell--pb10px\">\r\n          <small class=\"control-description\" id=\"news-preview-disc\">Поле обязательно к заполнению</small>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"form__table-cell form__table-cell--pr15px\">\r\n          <label class=\"nowrap\" for=\"news-text\">Текст новости *</label>\r\n        </td>\r\n        <td class=\"form__table-cell form__table-cell--wide\">\r\n          <editor v-model=\"article.text\" :api-key=\"tinymceKey\"></editor>\r\n          <div class=\"control-error\" v-if=\"v$.text.$errors.length\">\r\n            <div v-for=\"error of v$.text.$errors\">\r\n              <div>{{ error.$message }}</div>\r\n            </div>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"form__table-cell\"></td>\r\n        <td class=\"form__table-cell form__table-cell--wide form__table-cell--pb10px\">\r\n          <small class=\"control-description\" id=\"news-text-disc\">Поле обязательно к заполнению</small>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"form__table-cell\"><label class=\"nowrap\" for=\"news-title\"></label></td>\r\n        <td class=\"form__table-cell form__table-cell--wide\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"form__table-cell\"></td>\r\n        <td class=\"form__table-cell form__table-cell--wide\">\r\n          <div class=\"row\">\r\n            <div class=\"col-auto\">\r\n              <button type=\"submit\" :disabled=\"isLoading\" :class=\"['button', {'is-loading': isLoading}]\" >Отправить</button>\r\n            </div>\r\n            <div v-if=\"needShowButtons\" class=\"col-auto\">\r\n              <router-link :to=\"'/' + tableName + '/' + fbId\" class=\"button\">Посмотреть статью</router-link>\r\n            </div>\r\n            <div v-if=\"needShowButtons\" class=\"col-auto\">\r\n              <router-link :to=\"'/' + tableName + '/edit/' + fbId\" class=\"button\">Редактировать статью</router-link>\r\n            </div>\r\n          </div>\r\n\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </form>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { computed, reactive, ref, onMounted} from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from \"vue-router\";\r\nimport { useVuelidate } from '@vuelidate/core'\r\nimport { required } from '@vuelidate/validators'\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport NewsInputRow from \"@/components/News/NewsInputRow\";\r\n\r\nexport default {\r\n  name: \"ArticleAdd\",\r\n  setup () {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const tableName = route.meta.tableName\r\n    const articleDefault = {\r\n      img: '',\r\n      title: '',\r\n      preview: '',\r\n      text: '',\r\n      date: null,\r\n      tableName\r\n    }\r\n    const articleRules = {\r\n      title: { required },\r\n      preview: { required },\r\n      text: { required },\r\n      tableName: { required }\r\n    }\r\n    if (tableName === 'specials_and_actions') {\r\n      articleDefault.type = 'action'\r\n      articleRules.type = { required }\r\n    }\r\n    const article = reactive({...articleDefault})\r\n    const isLoading = ref(false)\r\n    const isAlreadyCreated = ref(false)\r\n    const fbId = ref('')\r\n    const tinymceKey = process.env.VUE_APP_TINYMCE_API_KEY\r\n    const v$ = useVuelidate(articleRules, article)\r\n    const needShowButtons = computed(() => (\r\n      !isAlreadyCreated.value ?\r\n        false :\r\n        !(article.img || article.title || article.preview || article.text)\r\n      ))\r\n    const resetForm = () => {\r\n      Object.keys(article).map(key => article[key] = articleDefault[key])\r\n      v$.value.$reset()\r\n    }\r\n\r\n    const onSubmit = async () => {\r\n      v$.value.$touch()\r\n      if (v$.value.$error) {\r\n        return;\r\n      }\r\n\r\n      isLoading.value = true\r\n      article.date = new Date()\r\n      const res = await store.dispatch('news/createNews', article)\r\n      if (res.result) {\r\n        isAlreadyCreated.value = true\r\n        fbId.value = res.data.name\r\n        resetForm()\r\n        store.dispatch('alerts/alertAdd', {\r\n          id: Date.now(),\r\n          text: `Статья успешно создана. <br>\r\n            Перейти к\r\n            <a href=\"/${tableName}/${fbId.value}\" class=\"js-click-push\">просмотру</a>.<br>\r\n            Перейти к <a href=\"/${tableName}/\">списку всех статей</a>.`,\r\n          type: 'success',\r\n          closable: true,\r\n          autoClosable: false\r\n        })\r\n      } else {\r\n        store.dispatch('alerts/alertAdd', {\r\n          id: Date.now(),\r\n          text: 'Ошибка ответа от сервера при добавлении новой новости',\r\n          type: 'error',\r\n          closable: true,\r\n          autoClosable: false\r\n        })\r\n      }\r\n      isLoading.value = false\r\n    }\r\n\r\n    return {\r\n      v$,\r\n      fbId,\r\n      article,\r\n      isLoading,\r\n      needShowButtons,\r\n      tinymceKey,\r\n      tableName,\r\n      onSubmit\r\n    }\r\n  },\r\n  components: { Editor, NewsInputRow }\r\n}\r\n</script>\r\n","import { render } from \"./ArticleAdd.vue?vue&type=template&id=a3f70206\"\nimport script from \"./ArticleAdd.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleAdd.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Programming\\\\LDV spa\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar getGlobal = function () { return (typeof window !== 'undefined' ? window : global); };\nvar getTinymce = function () {\n    var global = getGlobal();\n    return global && global.tinymce ? global.tinymce : null;\n};\nexport { getTinymce };\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { watch } from 'vue';\nvar validEvents = [\n    'onActivate',\n    'onAddUndo',\n    'onBeforeAddUndo',\n    'onBeforeExecCommand',\n    'onBeforeGetContent',\n    'onBeforeRenderUI',\n    'onBeforeSetContent',\n    'onBeforePaste',\n    'onBlur',\n    'onChange',\n    'onClearUndos',\n    'onClick',\n    'onContextMenu',\n    'onCopy',\n    'onCut',\n    'onDblclick',\n    'onDeactivate',\n    'onDirty',\n    'onDrag',\n    'onDragDrop',\n    'onDragEnd',\n    'onDragGesture',\n    'onDragOver',\n    'onDrop',\n    'onExecCommand',\n    'onFocus',\n    'onFocusIn',\n    'onFocusOut',\n    'onGetContent',\n    'onHide',\n    'onInit',\n    'onKeyDown',\n    'onKeyPress',\n    'onKeyUp',\n    'onLoadContent',\n    'onMouseDown',\n    'onMouseEnter',\n    'onMouseLeave',\n    'onMouseMove',\n    'onMouseOut',\n    'onMouseOver',\n    'onMouseUp',\n    'onNodeChange',\n    'onObjectResizeStart',\n    'onObjectResized',\n    'onObjectSelected',\n    'onPaste',\n    'onPostProcess',\n    'onPostRender',\n    'onPreProcess',\n    'onProgressState',\n    'onRedo',\n    'onRemove',\n    'onReset',\n    'onSaveContent',\n    'onSelectionChange',\n    'onSetAttrib',\n    'onSetContent',\n    'onShow',\n    'onSubmit',\n    'onUndo',\n    'onVisualAid'\n];\nvar isValidKey = function (key) {\n    return validEvents.map(function (event) { return event.toLowerCase(); }).indexOf(key.toLowerCase()) !== -1;\n};\nvar bindHandlers = function (initEvent, listeners, editor) {\n    Object.keys(listeners)\n        .filter(isValidKey)\n        .forEach(function (key) {\n        var handler = listeners[key];\n        if (typeof handler === 'function') {\n            if (key === 'onInit') {\n                handler(initEvent, editor);\n            }\n            else {\n                editor.on(key.substring(2), function (e) { return handler(e, editor); });\n            }\n        }\n    });\n};\nvar bindModelHandlers = function (props, ctx, editor, modelValue) {\n    var modelEvents = props.modelEvents ? props.modelEvents : null;\n    var normalizedEvents = Array.isArray(modelEvents) ? modelEvents.join(' ') : modelEvents;\n    watch(modelValue, function (val, prevVal) {\n        if (editor && typeof val === 'string' && val !== prevVal && val !== editor.getContent({ format: props.outputFormat })) {\n            editor.setContent(val);\n        }\n    });\n    editor.on(normalizedEvents ? normalizedEvents : 'change input undo redo', function () {\n        ctx.emit('update:modelValue', editor.getContent({ format: props.outputFormat }));\n    });\n};\nvar initEditor = function (initEvent, props, ctx, editor, modelValue, content) {\n    editor.setContent(content());\n    if (ctx.attrs['onUpdate:modelValue']) {\n        bindModelHandlers(props, ctx, editor, modelValue);\n    }\n    bindHandlers(initEvent, ctx.attrs, editor);\n};\nvar unique = 0;\nvar uuid = function (prefix) {\n    var time = Date.now();\n    var random = Math.floor(Math.random() * 1000000000);\n    unique++;\n    return prefix + '_' + random + unique + String(time);\n};\nvar isTextarea = function (element) {\n    return element !== null && element.tagName.toLowerCase() === 'textarea';\n};\nvar normalizePluginArray = function (plugins) {\n    if (typeof plugins === 'undefined' || plugins === '') {\n        return [];\n    }\n    return Array.isArray(plugins) ? plugins : plugins.split(' ');\n};\nvar mergePlugins = function (initPlugins, inputPlugins) {\n    return normalizePluginArray(initPlugins).concat(normalizePluginArray(inputPlugins));\n};\nvar isNullOrUndefined = function (value) {\n    return value === null || value === undefined;\n};\nexport { bindHandlers, bindModelHandlers, initEditor, isValidKey, uuid, isTextarea, mergePlugins, isNullOrUndefined };\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { uuid } from './Utils';\nvar createState = function () { return ({\n    listeners: [],\n    scriptId: uuid('tiny-script'),\n    scriptLoaded: false\n}); };\nvar CreateScriptLoader = function () {\n    var state = createState();\n    var injectScriptTag = function (scriptId, doc, url, callback) {\n        var scriptTag = doc.createElement('script');\n        scriptTag.referrerPolicy = 'origin';\n        scriptTag.type = 'application/javascript';\n        scriptTag.id = scriptId;\n        scriptTag.src = url;\n        var handler = function () {\n            scriptTag.removeEventListener('load', handler);\n            callback();\n        };\n        scriptTag.addEventListener('load', handler);\n        if (doc.head) {\n            doc.head.appendChild(scriptTag);\n        }\n    };\n    var load = function (doc, url, callback) {\n        if (state.scriptLoaded) {\n            callback();\n        }\n        else {\n            state.listeners.push(callback);\n            if (!doc.getElementById(state.scriptId)) {\n                injectScriptTag(state.scriptId, doc, url, function () {\n                    state.listeners.forEach(function (fn) { return fn(); });\n                    state.scriptLoaded = true;\n                });\n            }\n        }\n    };\n    // Only to be used by tests.\n    var reinitialize = function () {\n        state = createState();\n    };\n    return {\n        load: load,\n        reinitialize: reinitialize\n    };\n};\nvar ScriptLoader = CreateScriptLoader();\nexport { ScriptLoader };\n","export var editorProps = {\n    apiKey: String,\n    cloudChannel: String,\n    id: String,\n    init: Object,\n    initialValue: String,\n    inline: Boolean,\n    modelEvents: [String, Array],\n    plugins: [String, Array],\n    tagName: String,\n    toolbar: [String, Array],\n    modelValue: String,\n    disabled: Boolean,\n    tinymceScriptSrc: String,\n    outputFormat: {\n        type: String,\n        validator: function (prop) { return prop === 'html' || prop === 'text'; }\n    },\n};\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ScriptLoader } from '../ScriptLoader';\nimport { getTinymce } from '../TinyMCE';\nimport { isTextarea, mergePlugins, uuid, isNullOrUndefined, initEditor } from '../Utils';\nimport { editorProps } from './EditorPropTypes';\nimport { h, defineComponent, onMounted, ref, toRefs, nextTick, watch, onBeforeUnmount, onActivated, onDeactivated } from 'vue';\nvar renderInline = function (ce, id, elementRef, tagName) {\n    return ce(tagName ? tagName : 'div', {\n        id: id,\n        ref: elementRef\n    });\n};\nvar renderIframe = function (ce, id, elementRef) {\n    return ce('textarea', {\n        id: id,\n        visibility: 'hidden',\n        ref: elementRef\n    });\n};\nexport var Editor = defineComponent({\n    props: editorProps,\n    setup: function (props, ctx) {\n        var conf = props.init ? __assign({}, props.init) : {};\n        var _a = toRefs(props), disabled = _a.disabled, modelValue = _a.modelValue, tagName = _a.tagName;\n        var element = ref(null);\n        var vueEditor = null;\n        var elementId = props.id || uuid('tiny-vue');\n        var inlineEditor = (props.init && props.init.inline) || props.inline;\n        var modelBind = !!ctx.attrs['onUpdate:modelValue'];\n        var mounting = true;\n        var initialValue = props.initialValue ? props.initialValue : '';\n        var cache = '';\n        var getContent = function (isMounting) { return modelBind ?\n            function () { return ((modelValue === null || modelValue === void 0 ? void 0 : modelValue.value) ? modelValue.value : ''); } :\n            function () { return isMounting ? initialValue : cache; }; };\n        var initWrapper = function () {\n            var content = getContent(mounting);\n            var finalInit = __assign(__assign({}, conf), { readonly: props.disabled, selector: \"#\" + elementId, plugins: mergePlugins(conf.plugins, props.plugins), toolbar: props.toolbar || (conf.toolbar), inline: inlineEditor, setup: function (editor) {\n                    vueEditor = editor;\n                    editor.on('init', function (e) { return initEditor(e, props, ctx, editor, modelValue, content); });\n                    if (typeof conf.setup === 'function') {\n                        conf.setup(editor);\n                    }\n                } });\n            if (isTextarea(element.value)) {\n                element.value.style.visibility = '';\n            }\n            getTinymce().init(finalInit);\n            mounting = false;\n        };\n        watch(disabled, function (disable) {\n            var _a;\n            if (vueEditor !== null) {\n                if (typeof ((_a = vueEditor.mode) === null || _a === void 0 ? void 0 : _a.set) === 'function') {\n                    vueEditor.mode.set(disable ? 'readonly' : 'design');\n                }\n                else {\n                    vueEditor.setMode(disable ? 'readonly' : 'design');\n                }\n            }\n        });\n        watch(tagName, function (_) {\n            var _a;\n            if (!modelBind) {\n                cache = vueEditor.getContent();\n            }\n            (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(vueEditor);\n            nextTick(function () { return initWrapper(); });\n        });\n        onMounted(function () {\n            if (getTinymce() !== null) {\n                initWrapper();\n            }\n            else if (element.value && element.value.ownerDocument) {\n                var channel = props.cloudChannel ? props.cloudChannel : '5';\n                var apiKey = props.apiKey ? props.apiKey : 'no-api-key';\n                var scriptSrc = isNullOrUndefined(props.tinymceScriptSrc) ?\n                    \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/\" + channel + \"/tinymce.min.js\" :\n                    props.tinymceScriptSrc;\n                ScriptLoader.load(element.value.ownerDocument, scriptSrc, initWrapper);\n            }\n        });\n        onBeforeUnmount(function () {\n            if (getTinymce() !== null) {\n                getTinymce().remove(vueEditor);\n            }\n        });\n        if (!inlineEditor) {\n            onActivated(function () {\n                if (!mounting) {\n                    initWrapper();\n                }\n            });\n            onDeactivated(function () {\n                var _a;\n                if (!modelBind) {\n                    cache = vueEditor.getContent();\n                }\n                (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(vueEditor);\n            });\n        }\n        var rerender = function (init) {\n            var _a;\n            cache = vueEditor.getContent();\n            (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(vueEditor);\n            conf = __assign(__assign({}, conf), init);\n            nextTick(function () { return initWrapper(); });\n        };\n        ctx.expose({\n            rerender: rerender\n        });\n        return function () { return inlineEditor ?\n            renderInline(h, elementId, element, props.tagName) :\n            renderIframe(h, elementId, element); };\n    }\n});\n","/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { Editor } from './components/Editor';\nexport default Editor;\n"],"sourceRoot":""}