(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f70e951"],{"18a5":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const r={key:0,class:"text"},c=Object(a["createElementVNode"])("p",null,"Вы авторизованы на сайте",-1),l={class:"text"},n=Object(a["createElementVNode"])("br",null,null,-1),i=["id"],s={class:"form__table"},d=Object(a["createElementVNode"])("td",{class:"form__table-cell"},null,-1),u={class:"form__table-cell form__table-cell--wide"},m=["disabled"],b={key:0},p=Object(a["createElementVNode"])("br",null,null,-1),O={class:"control-description is-error"},j={class:"nowrap"};function f(e,t,o,f,N,w){const V=Object(a["resolveComponent"])("router-link"),E=Object(a["resolveComponent"])("news-input-row");return e.isAuth?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[c,Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("Чтобы создать нового пользователя, пожалуйста, "),Object(a["createElementVNode"])("a",{href:"#",onClick:t[0]||(t[0]=(...t)=>e.onClickLogout&&e.onClickLogout(...t))},"разлогиньтесь")])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])(" Если у вас уже есть учетная запись, вы можете "),Object(a["createVNode"])(V,{to:"/singin"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("авторизоваться")]),_:1}),Object(a["createTextVNode"])(". ")]),n]),Object(a["createElementVNode"])("form",{action:"#",id:e.formId,class:"form",novalidate:"",onSubmit:t[4]||(t[4]=Object(a["withModifiers"])((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[Object(a["createElementVNode"])("table",s,[Object(a["createElementVNode"])("tbody",null,[Object(a["createVNode"])(E,{formName:e.formId,inputType:"email",inputName:"email",label:"Email *",description:"Поле обязательно к заполнению",controlValue:e.form.email,"onUpdate:controlValue":t[1]||(t[1]=t=>e.form.email=t),errors:e.v$.email.$errors},null,8,["formName","controlValue","errors"]),Object(a["createVNode"])(E,{formName:e.formId,inputType:"password",inputName:"password",label:"Пароль *",description:"Поле обязательно к заполнению",controlValue:e.form.password,"onUpdate:controlValue":t[2]||(t[2]=t=>e.form.password=t),errors:e.v$.password.$errors},null,8,["formName","controlValue","errors"]),Object(a["createVNode"])(E,{formName:e.formId,inputType:"password",inputName:"repeat_password",label:"Повторите <br> пароль *",description:"Поле обязательно к заполнению",controlValue:e.form.repeatPassword,"onUpdate:controlValue":t[3]||(t[3]=t=>e.form.repeatPassword=t),errors:e.v$.repeatPassword.$errors},null,8,["formName","controlValue","errors"]),Object(a["createElementVNode"])("tr",null,[d,Object(a["createElementVNode"])("td",u,[Object(a["createElementVNode"])("button",{type:"submit",disabled:e.isFormLoading||e.isAttemptsExeed||e.isSubmitBlocked,class:Object(a["normalizeClass"])(["button",{"is-loading":e.isFormLoading}])}," Отправить ",10,m),e.isSubmitBlocked?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[p,Object(a["createElementVNode"])("small",O,[Object(a["createTextVNode"])(" Превышено максимальное количество попыток зарегистрироваться. Возможность зарегистрироваться заблокирована до "),Object(a["createElementVNode"])("span",j,Object(a["toDisplayString"])(e.dateTimeFilter(e.blockedUntilDate)),1)])])):Object(a["createCommentVNode"])("",!0)])])])])],40,i)],64))}o("14d9");var N=o("5502"),w=o("6605"),V=o("c3b3"),E=o("b9fb"),g=o("8edc"),k=o("8512"),h=o("dbae"),v=o("7cfa"),_=Object(a["defineComponent"])({name:"SingUp",setup(){const e=Object(N["e"])(),t=Object(w["d"])(),o=Object(a["ref"])("auth"),r=Object(a["reactive"])({email:"",password:"",repeatPassword:""}),c=Object(a["computed"])(()=>r.password),l={email:{required:E["c"],email:E["a"]},password:{required:E["c"],minLength:Object(E["b"])(6)},repeatPassword:{required:E["c"],minLength:Object(E["b"])(6),sameAs:Object(E["d"])(c)}},n=Object(V["a"])(l,r),i=e.getters["auth/isAuth"],{isDisabled:s,isFormLoading:d,isSubmitBlocked:u,isAttemptsExeed:m,blockedUntilDate:b,attemptCount:p}={...Object(h["a"])("singUp")},O=async()=>{if(n.value.$touch(),!n.value.$error)try{d.value=!0;let{result:o,data:a}=await e.dispatch("auth/singUp",r);if(o)await e.dispatch("profile/fetchProfile"),await t.push("/profile");else{const t=a.error.message,o="OPERATION_NOT_ALLOWED"!==t?t:"SING_UP_"+t;await e.dispatch("alerts/alertAdd",{id:Date.now(),text:Object(v["a"])(o),type:"error",closable:!0,autoClosable:!1}),p.value++}}catch(o){}finally{d.value=!1}},j=async()=>{await e.dispatch("auth/logout")};return{formId:o,form:r,v$:n,isAuth:i,isDisabled:s,isFormLoading:d,isSubmitBlocked:u,isAttemptsExeed:m,blockedUntilDate:b,onSubmit:O,onClickLogout:j,dateTimeFilter:k["a"]}},components:{NewsInputRow:g["a"]}}),T=o("6b0d"),A=o.n(T);const D=A()(_,[["render",f]]);t["default"]=D},"7cfa":function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));const a={EMAIL_NOT_FOUND:"Пользователь с таким email не был найден",INVALID_PASSWORD:"Пароль неверный",TOO_MANY_ATTEMPTS_TRY_LATER:"Превышено максимальное количество попыток зарегистрироваться.",USER_DISABLED:"Учетная запись пользователя отключена администратором",EMAIL_EXISTS:"Пользователь с таким адресом электронной почты уже зарегистрирован",SING_UP_OPERATION_NOT_ALLOWED:"Для этого сайта недоступна регистрация с помощью лектронной почты и пароля",auth:"Пожалуйста войдите в систему"};var r=a;function c(e){return r[e]?r[e]:"Неизвестная ошибка"}},8512:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));const a={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};function r(e){return Intl.DateTimeFormat("ru-Ru",a).format(e)}},dbae:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var a=o("7a23"),r=o("5502");const c=5e4,l=3;function n(e){const t=Object(r["e"])(),o=Object(a["ref"])(0),n=Object(a["ref"])(!1),i="skipAuto/"+e,s=Object(a["computed"])(()=>t.getters[i]),d=Object(a["computed"])(()=>new Date(s.value)),u=Object(a["computed"])(()=>o.value>=l),m=Object(a["computed"])(()=>!!d.value&&d.value.getTime()>Date.now()),b=Object(a["computed"])(()=>{n.value||m.value});return Object(a["watch"])(u,a=>{let r=new Date,l={};a&&(r.setMilliseconds(r.getMilliseconds()+c),l[e]=r,t.dispatch("skipAuto/setParam",l),setTimeout(()=>{o.value=0,t.dispatch("skipAuto/setParam",{singUp:null})},c))}),{isDisabled:b,isFormLoading:n,isSubmitBlocked:m,isAttemptsExeed:u,attemptCount:o,blockedUntilDate:d}}}}]);
//# sourceMappingURL=chunk-3f70e951.768bfa15.js.map